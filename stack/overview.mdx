---
title: kombify Stack
description: Hybrid infrastructure control plane for homelabs and cloud
sidebarTitle: Overview
icon: server
---

# kombify Stack

**kombify Stack** is an open-source infrastructure control plane that manages your homelab nodes through a unified spec-driven workflow.

<Card title="What is kombify Stack?" icon="circle-info">
  Stack orchestrates your infrastructure by reading a single `kombination.yaml` file, validating it with CUE schemas, and deploying using OpenTofu. It manages both local servers and cloud VPS through lightweight gRPC agents.
</Card>

## Key Features

<CardGroup cols={2}>
  <Card title="Spec-Driven" icon="file-code">
    Define your infrastructure in YAML — Stack handles validation, generation, and deployment
  </Card>
  <Card title="Agent-Based" icon="robot">
    Lightweight agents connect your nodes to the control plane via secure mTLS
  </Card>
  <Card title="Multi-Engine" icon="gears">
    Support for Proxmox, Docker, Kubernetes, and cloud providers
  </Card>
  <Card title="Open Source" icon="code-branch">
    MIT licensed core with optional enterprise features
  </Card>
</CardGroup>

## How It Works

```mermaid
flowchart LR
    subgraph Input["Your Intent"]
        YAML["kombination.yaml"]
    end

    subgraph Stack["kombify Stack"]
        direction TB
        API["REST API"]
        Unifier["Unifier Engine"]
        ToFu["OpenTofu"]
        gRPC["gRPC Server"]
        
        API --> Unifier
        Unifier --> ToFu
        API --> gRPC
    end

    subgraph Infra["Your Infrastructure"]
        Agent1["Agent 1<br/><i>proxmox-01</i>"]
        Agent2["Agent 2<br/><i>docker-01</i>"]
        Services["Deployed<br/>Services"]
    end

    YAML --> API
    ToFu --> Agent1 & Agent2
    Agent1 & Agent2 --> Services
    gRPC <-.->|mTLS| Agent1 & Agent2

    style Input fill:#e0f2fe,stroke:#0284c7
    style Stack fill:#fef3c7,stroke:#d97706
    style Infra fill:#d1fae5,stroke:#059669
```

<Steps>
  <Step title="Define" icon="file-code">
    Write your desired state in `kombination.yaml`
  </Step>
  <Step title="Validate" icon="check">
    Stack validates against StackKit CUE schemas
  </Step>
  <Step title="Generate" icon="code">
    OpenTofu code is generated automatically
  </Step>
  <Step title="Deploy" icon="rocket">
    Infrastructure is provisioned via agents
  </Step>
</Steps>

## Architecture

```mermaid
graph TB
    subgraph UI["User Interface"]
        Dashboard["SvelteKit Dashboard<br/>Port: 5261"]
        CLI["CLI Tool"]
    end

    subgraph Core["kombify Stack Core"]
        API["REST API<br/>Port: 5260"]
        Unifier["Unifier Engine"]
        ToFu["OpenTofu Runner"]
        gRPC["gRPC Server<br/>Port: 5263"]
        PB["PocketBase<br/>(SQLite)"]
        
        API --> Unifier
        Unifier --> ToFu
        API --> PB
        gRPC --> PB
    end

    subgraph Agents["Node Agents"]
        A1["proxmox-01"]
        A2["docker-01"]
        A3["k8s-01"]
    end

    Dashboard --> API
    CLI --> API
    gRPC <-->|mTLS| A1 & A2 & A3

    style UI fill:#e0f2fe,stroke:#0284c7
    style Core fill:#fef3c7,stroke:#d97706
    style Agents fill:#d1fae5,stroke:#059669
```

### Service Ports

| Service | Port | Protocol | Description |
|---------|------|----------|-------------|
| Core API | 5260 | HTTP | REST API + PocketBase Admin |
| Frontend | 5261 | HTTP | SvelteKit Dashboard |
| gRPC | 5263 | gRPC/mTLS | Agent communication |

### Tech Stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Backend** | Go 1.24+ | Core services and agents |
| **Frontend** | SvelteKit 2.x | Modern reactive UI |
| **Database** | PocketBase (SQLite) | Embedded state management |
| **IaC Engine** | OpenTofu 1.6+ | Infrastructure provisioning |
| **Validation** | CUE 0.15+ | Type-safe configuration |
| **Networking** | gRPC + mTLS | Secure agent communication |

## Core Principles

### 1. Spec-Driven Flow

```mermaid
flowchart LR
    Intent["kombination.yaml<br/><i>(Intent)</i>"]
    CUE["Unifier + CUE<br/><i>(Validation)</i>"]
    IaC["OpenTofu<br/><i>(IaC)</i>"]
    Infra["Infrastructure<br/><i>(Reality)</i>"]

    Intent --> CUE --> IaC --> Infra

    style Intent fill:#e0f2fe,stroke:#0284c7
    style CUE fill:#fce7f3,stroke:#db2777
    style IaC fill:#fef3c7,stroke:#d97706
    style Infra fill:#d1fae5,stroke:#059669
```

User intent is **never** automatically modified. All transformations create separate artifacts.

### 2. Single-Stack Architecture

<Note>
  **1 kombify Stack = 1 Homelab**
</Note>

- One instance manages exactly one homelab
- A homelab can include multiple physical servers (nodes)
- Multi-homelab scenarios require multiple Stack instances

### 3. Interface-First Design

Business logic changes begin with `pkg/core` interfaces. Implementations follow the contracts.

## Quick Example

```yaml kombination.yaml
version: "1.0"
stackkit: base-homelab

meta:
  name: my-homelab
  domain: home.example.com

nodes:
  - name: proxmox-01
    type: hypervisor
    connection:
      host: 192.168.1.100
      user: root
      ssh_key: ~/.ssh/id_ed25519

services:
  - traefik      # Reverse proxy with auto-SSL
  - authelia     # Single sign-on
  - homepage     # Dashboard
  - immich       # Photo management
```

```bash
# Validate configuration
kombify validate

# Preview changes
kombify plan

# Apply to infrastructure
kombify apply
```

## Installation Options

<CardGroup cols={3}>
  <Card title="Docker" icon="docker" href="/stack/install/docker">
    Fastest way to get started — single `docker compose up`
  </Card>
  <Card title="Kubernetes" icon="dharmachakra" href="/stack/install/kubernetes">
    Production-ready Helm chart with HA support
  </Card>
  <Card title="Bare Metal" icon="server" href="/stack/install/bare-metal">
    Install directly on Linux servers
  </Card>
</CardGroup>

## Next Steps

<Columns cols={2}>
  <Card title="Quick Start" icon="rocket" href="/stack/quickstart">
    Deploy your first stack in 10 minutes
  </Card>
  <Card title="Architecture Deep Dive" icon="sitemap" href="/stack/architecture">
    Understand the Unifier, agents, and data flow
  </Card>
</Columns>

---

## Getting Help

<Columns cols={3}>
  <Card title="Troubleshooting" icon="wrench" href="/stack/troubleshooting">
    Common issues and solutions
  </Card>
  <Card title="Discord" icon="discord" href="https://discord.gg/kombify">
    Real-time community support
  </Card>
  <Card title="GitHub" icon="github" href="https://github.com/kombify/stack">
    Report issues and contribute
  </Card>
</Columns>
