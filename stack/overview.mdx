---
title: kombify Stack
description: The brain of your homelab â€” orchestration made simple
sidebarTitle: Overview
icon: server
---

# kombify Stack

**kombify Stack** is your homelab's control center. Tell it what you want, and it figures out how to make it happen â€” from a single server to a multi-node cluster.

## The simple version

<Card title="What does Stack do?" icon="lightbulb">
  Imagine you want a private photo cloud for your family. Instead of spending days researching Docker, reverse proxies, and SSL certificates, you write a simple configuration file describing *what* you want. Stack handles *everything else* â€” validation, setup, deployment, and ongoing maintenance.
</Card>

```yaml kombination.yaml
# This is all you write
stackkit: base-homelab
services:
  - traefik    # Handles web traffic
  - immich     # Your photo cloud
```

Stack transforms this into hundreds of lines of configuration and deploys it to your server automatically.

<Accordion title="ğŸ”§ Technical details" icon="code">
  Stack is a Go-based orchestration engine that:
  - Reads your `kombination.yaml` specification
  - Validates it against CUE schemas from StackKits
  - Generates OpenTofu/Docker configurations
  - Deploys via mTLS-secured gRPC agents on your nodes
  - Continuously monitors for drift between desired and actual state
  
  **Tech stack:** Go 1.24+, PocketBase (SQLite), OpenTofu, CUE, gRPC with mTLS
</Accordion>

## Key features

<CardGroup cols={2}>
  <Card title="Write once, deploy anywhere" icon="file-code">
    Your entire homelab configuration lives in one YAML file â€” version-controlled, shareable, reproducible
  </Card>
  <Card title="Test before you break things" icon="flask">
    Simulate deployments in Docker before touching real hardware
  </Card>
  <Card title="Works with what you have" icon="arrows-rotate">
    Already running servers? Stack discovers them and lets you adopt gradually
  </Card>
  <Card title="Self-healing" icon="shield-check">
    Detects when reality drifts from your configuration and can fix it automatically
  </Card>
</CardGroup>

## How it works

```mermaid
flowchart LR
    subgraph You["ğŸ‘¤ You"]
        YAML["<b>kombination.yaml</b><br/>Your wishlist"]
    end

    subgraph Stack["âš™ï¸ kombify Stack"]
        direction TB
        Wizard["Wizard<br/><i>or manual edit</i>"]
        Validate["Validate<br/><i>against rules</i>"]
        Generate["Generate<br/><i>real configs</i>"]
        Deploy["Deploy<br/><i>to servers</i>"]
        
        Wizard --> Validate --> Generate --> Deploy
    end

    subgraph Result["ğŸ  Your Homelab"]
        S1["ğŸ“¸ Immich<br/>Photo Cloud"]
        S2["ğŸ” Authelia<br/>Login Portal"]
        S3["ğŸ“Š Homepage<br/>Dashboard"]
    end

    YAML --> Wizard
    Deploy --> Result

    style You fill:#dbeafe,stroke:#2563eb
    style Stack fill:#fef3c7,stroke:#d97706
    style Result fill:#d1fae5,stroke:#059669
```

<Steps>
  <Step title="Describe what you want" icon="wand-magic-sparkles">
    Use the Easy Wizard or write a simple YAML file â€” no need to understand Docker, networking, or certificates
  </Step>
  <Step title="Stack validates your choices" icon="check">
    Your configuration is checked against proven patterns to catch errors before deployment
  </Step>
  <Step title="Infrastructure code is generated" icon="code">
    Stack creates all the complex configuration files you'd otherwise write by hand
  </Step>
  <Step title="Services are deployed" icon="rocket">
    Lightweight agents on your servers apply the changes and report back
  </Step>
</Steps>

<Accordion title="ğŸ”§ Under the hood: The complete data flow" icon="diagram-project">

```mermaid
flowchart TB
    subgraph Input["Input Layer"]
        UI["Web Dashboard<br/><small>Port 5261</small>"]
        CLI["CLI Tool"]
        YAML["kombination.yaml"]
    end

    subgraph Core["kombify Stack Core"]
        API["REST API<br/><small>Port 5260</small>"]
        
        subgraph Unifier["Unifier Engine"]
            Parse["Parse YAML"]
            Validate["CUE Validation"]
            Resolve["Resolve Dependencies"]
            Generate["Generate IaC"]
        end
        
        PB[("PocketBase<br/><small>SQLite State</small>")]
        gRPC["gRPC Server<br/><small>Port 5263</small>"]
        ToFu["OpenTofu<br/>Runner"]
    end

    subgraph Agents["Node Agents"]
        A1["Agent<br/><small>proxmox-01</small>"]
        A2["Agent<br/><small>docker-01</small>"]
        A3["Agent<br/><small>nas-01</small>"]
    end

    subgraph Infra["Deployed Infrastructure"]
        Docker["Docker Containers"]
        VMs["Virtual Machines"]
        Services["Running Services"]
    end

    UI & CLI --> API
    YAML --> API
    API --> Unifier
    API <--> PB
    Unifier --> ToFu
    ToFu --> gRPC
    gRPC <-->|"mTLS encrypted"| A1 & A2 & A3
    A1 & A2 & A3 --> Docker & VMs
    Docker & VMs --> Services

    style Input fill:#e0f2fe,stroke:#0284c7
    style Core fill:#fef3c7,stroke:#d97706
    style Agents fill:#f3e8ff,stroke:#9333ea
    style Infra fill:#d1fae5,stroke:#059669
```

**Data flow explained:**
1. **Input** â€” Configuration enters via Web UI, CLI, or direct YAML file
2. **Unifier Engine** â€” Parses, validates against CUE schemas, resolves dependencies, generates OpenTofu code
3. **State Management** â€” PocketBase stores stack state, job history, and agent registry
4. **Agent Communication** â€” gRPC with mutual TLS ensures secure, authenticated communication
5. **Deployment** â€” Agents execute changes on their respective nodes

</Accordion>

## Architecture at a glance

```mermaid
graph TB
    subgraph Users["Users"]
        Admin["ğŸ‘¤ Admin"]
        Dev["ğŸ‘¤ Developer"]
    end

    subgraph Stack["kombify Stack"]
        Dashboard["ğŸ–¥ï¸ Dashboard<br/><small>SvelteKit</small>"]
        API["ğŸ”Œ API<br/><small>Go + PocketBase</small>"]
        Agents["ğŸ¤– Agents<br/><small>Go + gRPC</small>"]
    end

    subgraph Nodes["Your Servers"]
        N1["ğŸ–¥ï¸ Server 1"]
        N2["ğŸ–¥ï¸ Server 2"]
        N3["ğŸ–¥ï¸ Server 3"]
    end

    Users --> Dashboard
    Dashboard --> API
    API <-->|"Secure tunnel"| Agents
    Agents --> Nodes

    style Users fill:#dbeafe,stroke:#2563eb
    style Stack fill:#fef3c7,stroke:#d97706
    style Nodes fill:#d1fae5,stroke:#059669
```

### Ports and services

| Service | Port | What it does |
|---------|------|--------------|
| **Dashboard** | 5261 | Web interface for managing your homelab |
| **API** | 5260 | REST API + PocketBase admin panel |
| **gRPC** | 5263 | Secure communication with agents |

<Accordion title="ğŸ”§ Technical specifications" icon="microchip">

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Backend** | Go 1.24+ | Core services, agents, CLI |
| **Frontend** | SvelteKit 2.x | Modern reactive dashboard |
| **Database** | PocketBase (SQLite) | Embedded state management |
| **IaC Engine** | OpenTofu 1.6+ | Infrastructure provisioning |
| **Validation** | CUE 0.15+ | Type-safe schema validation |
| **Networking** | gRPC + mTLS | Encrypted agent communication |

**Why these choices?**
- **Go** â€” Single binary, low memory, cross-platform
- **PocketBase** â€” Zero-config embedded database with auth
- **OpenTofu** â€” Open-source Terraform fork, battle-tested
- **CUE** â€” Catch configuration errors before deployment
- **mTLS** â€” Every connection is encrypted and authenticated

</Accordion>

## Core principles

### 1. Your intent stays untouched

```mermaid
flowchart LR
    Intent["ğŸ“ Your File<br/><i>kombination.yaml</i>"]
    Generated["âš™ï¸ Generated<br/><i>docker-compose.yml<br/>traefik.yml<br/>...</i>"]
    Infra["ğŸ–¥ï¸ Running<br/><i>Your servers</i>"]

    Intent -->|"read only"| Generated
    Generated -->|"deployed"| Infra

    style Intent fill:#dbeafe,stroke:#2563eb
    style Generated fill:#fef3c7,stroke:#d97706
    style Infra fill:#d1fae5,stroke:#059669
```

Stack never modifies your configuration file. All transformations create separate artifacts that you can inspect.

### 2. One Stack = one homelab

<Note>
  A single kombify Stack instance manages one homelab. That homelab can include multiple physical servers (nodes), but they belong to one logical unit.
</Note>

Need multiple homelabs? Use [kombify Sphere](/sphere/overview) to manage several Stack instances from one dashboard.

### 3. Brownfield-friendly

Already have servers running? Stack doesn't force you to start from scratch:

```mermaid
flowchart LR
    subgraph Existing["Existing Setup"]
        E1["ğŸ–¥ï¸ NAS Server<br/><i>unmanaged</i>"]
        E2["ğŸ–¥ï¸ Docker Host<br/><i>unmanaged</i>"]
    end

    subgraph Discovery["Stack Discovery"]
        Scan["ğŸ” Scan network"]
        Classify["ğŸ“‹ Classify devices"]
    end

    subgraph Adoption["Gradual Adoption"]
        M1["âœ… Docker Host<br/><i>managed</i>"]
        U1["ğŸ“‹ NAS Server<br/><i>monitored only</i>"]
    end

    Existing --> Scan
    Scan --> Classify
    Classify --> Adoption

    style Existing fill:#fee2e2,stroke:#dc2626
    style Discovery fill:#fef3c7,stroke:#d97706
    style Adoption fill:#d1fae5,stroke:#059669
```

- **Managed** â€” Stack fully controls configuration and deployment
- **Unmanaged** â€” Stack sees the device but doesn't touch it
- You can gradually move devices from unmanaged to managed as you're ready

## Quick Example

```yaml kombination.yaml
version: "1.0"
stackkit: base-homelab

meta:
  name: my-homelab
  domain: home.example.com

nodes:
  - name: proxmox-01
    type: hypervisor
    connection:
      host: 192.168.1.100
      user: root
      ssh_key: ~/.ssh/id_ed25519

services:
  - traefik      # Reverse proxy with auto-SSL
  - authelia     # Single sign-on
  - homepage     # Dashboard
  - immich       # Photo management
```

```bash
# Validate configuration
kombify validate

# Preview changes
kombify plan

# Apply to infrastructure
kombify apply
```

## Installation Options

<CardGroup cols={3}>
  <Card title="Docker" icon="docker" href="/stack/install/docker">
    Fastest way to get started â€” single `docker compose up`
  </Card>
  <Card title="Kubernetes" icon="dharmachakra" href="/stack/install/kubernetes">
    Production-ready Helm chart with HA support
  </Card>
  <Card title="Bare Metal" icon="server" href="/stack/install/bare-metal">
    Install directly on Linux servers
  </Card>
</CardGroup>

## Next Steps

<Columns cols={2}>
  <Card title="Quick Start" icon="rocket" href="/stack/quickstart">
    Deploy your first stack in 10 minutes
  </Card>
  <Card title="Architecture Deep Dive" icon="sitemap" href="/stack/architecture">
    Understand the Unifier, agents, and data flow
  </Card>
</Columns>

---

## Getting Help

<Columns cols={3}>
  <Card title="Troubleshooting" icon="wrench" href="/stack/troubleshooting">
    Common issues and solutions
  </Card>
  <Card title="Discord" icon="discord" href="https://discord.gg/kombify">
    Real-time community support
  </Card>
  <Card title="GitHub" icon="github" href="https://github.com/kombify/stack">
    Report issues and contribute
  </Card>
</Columns>
