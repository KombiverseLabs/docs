---
title: KombiSim overview
description: Test infrastructure configurations before deploying to real hardware
---

# KombiSim

KombiSim is an **infrastructure simulation engine** that creates lightweight Docker-based "VMs" for testing your configurations before deploying to real hardware.

<CardGroup cols={2}>
  <Card
    title="Quick start"
    icon="rocket"
    href="/tools/kombisim/quickstart"
  >
    Create your first simulation in 2 minutes
  </Card>
  <Card
    title="Templates"
    icon="file-code"
    href="/tools/kombisim/templates"
  >
    Explore pre-built simulation templates
  </Card>
  <Card
    title="Installation"
    icon="download"
    href="/tools/kombisim/installation"
  >
    Install KombiSim standalone or with KombiStack
  </Card>
  <Card
    title="API reference"
    icon="code"
    href="/api/kombisim/overview"
  >
    Explore the REST API
  </Card>
</CardGroup>

## What is KombiSim?

KombiSim allows you to **simulate your entire infrastructure** using Docker containers that behave like real servers:

- **Real SSH access** on ports 2222-2322
- **Persistent storage** via Docker volumes
- **Network isolation** with custom Docker networks
- **Resource limits** to simulate different hardware tiers
- **Pre-built templates** for common scenarios

## Why simulate?

<CardGroup cols={2}>
  <Card title="Catch errors early" icon="bug">
    Identify configuration issues before they affect production
  </Card>
  <Card title="Zero risk" icon="shield-check">
    Test destructive changes without impacting real systems
  </Card>
  <Card title="Fast iteration" icon="forward-fast">
    Spin up and tear down environments in seconds
  </Card>
  <Card title="Cost effective" icon="dollar-sign">
    No cloud costs for testing and development
  </Card>
</CardGroup>

## Key features

<AccordionGroup>
  <Accordion title="Docker-based simulation nodes" icon="docker">
    Each simulated node is a Docker container with:
    
    - **Ubuntu 22.04** base image
    - **SSH server** on ports 2222-2322
    - **systemd** for service management
    - **Docker-in-Docker** support
    - **Persistent volumes** for data
    
    ```bash
    # SSH into simulated node
    ssh -p 2222 root@localhost
    # Password: kombisim
    ```
  </Accordion>

  <Accordion title="Simulation groups" icon="layer-group">
    Organize nodes into logical groups:
    
    - **Homelab basic:** 2 nodes (web + database)
    - **Homelab advanced:** 5 nodes (full stack)
    - **Hybrid setup:** VPS + local nodes
    - **HA setup:** High availability cluster
    - **Development:** Dev environment
    - **Testing:** CI/CD testing
  </Accordion>

  <Accordion title="Pre-built templates" icon="file-code">
    6 ready-to-use templates for common scenarios:
    
    | Template | Nodes | Use case |
    |----------|-------|----------|
    | **homelab-basic** | 2 | Simple web + database |
    | **homelab-advanced** | 5 | Production homelab |
    | **hybrid-setup** | 5 | VPS + local combined |
    | **ha-setup** | 5 | High availability |
    | **development** | 3 | Dev environment |
    | **testing** | 2 | CI/CD testing |
  </Accordion>

  <Accordion title="REST API" icon="code">
    Full REST API for automation:
    
    ```bash
    # Create simulation
    curl -X POST http://localhost:5270/api/v1/simulations \
      -H "Content-Type: application/json" \
      -d '{"name": "my-test", "nodes": [...]}'
    
    # Start nodes
    curl -X POST http://localhost:5270/api/v1/simulations/{id}/start
    
    # Get SSH details
    curl http://localhost:5270/api/v1/nodes/{id}/ssh
    ```
  </Accordion>

  <Accordion title="Web UI" icon="browser">
    Manage simulations through a clean web interface:
    
    - Create and manage simulations
    - Monitor node status
    - View SSH connection details
    - Apply templates
    - Export configurations
    
    Access at: `http://localhost:5271`
  </Accordion>

  <Accordion title="KombiStack integration" icon="layer-group">
    Automatic validation before deployment:
    
    ```yaml
    # kombistack.yaml
    simulation:
      enabled: true
      endpoint: "http://localhost:5270"
      auto_validate: true
    ```
    
    KombiStack will:
    1. Create simulation matching your spec
    2. Deploy to simulated nodes
    3. Run validation tests
    4. Report results
    5. Proceed to real deployment if successful
  </Accordion>
</AccordionGroup>

## Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                      KOMBISIM SYSTEM                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │                    WEB UI (SvelteKit)                     │   │
│  │                        :5271                              │   │
│  └────────────────────────┬─────────────────────────────────┘   │
│                           │                                     │
│                           ▼                                     │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │                  REST API (Go)                            │   │
│  │                     :5270                                 │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │  Simulation Manager                                │  │   │
│  │  │  • Create/Delete simulations                       │  │   │
│  │  │  • Manage simulation groups                        │  │   │
│  │  │  • Apply templates                                 │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │  Node Manager                                      │  │   │
│  │  │  • Create/Start/Stop nodes                         │  │   │
│  │  │  • Assign SSH ports (2222-2322)                    │  │   │
│  │  │  • Monitor health                                  │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  │  ┌────────────────────────────────────────────────────┐  │   │
│  │  │  SQLite Database                                   │  │   │
│  │  │  • Simulations                                     │  │   │
│  │  │  • Nodes                                           │  │   │
│  │  │  • Templates                                       │  │   │
│  │  └────────────────────────────────────────────────────┘  │   │
│  └────────────────────────┬─────────────────────────────────┘   │
│                           │                                     │
│                           ▼                                     │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │                  Docker Engine                            │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │   │
│  │  │   Node 1    │  │   Node 2    │  │   Node N    │      │   │
│  │  │  SSH :2222  │  │  SSH :2223  │  │  SSH :2322  │      │   │
│  │  │  Ubuntu     │  │  Ubuntu     │  │  Ubuntu     │      │   │
│  │  │  systemd    │  │  systemd    │  │  systemd    │      │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘      │   │
│  └──────────────────────────────────────────────────────────┘   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## Tech stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Backend** | Go 1.24+ | REST API and simulation management |
| **Frontend** | SvelteKit 5 | Web UI dashboard |
| **Database** | SQLite | Simulation state persistence |
| **Container runtime** | Docker SDK | Node creation and management |
| **Base image** | Ubuntu 22.04 | Simulated node OS |

## Service ports

| Service | Port | Description |
|---------|------|-------------|
| REST API | 5270 | HTTP API for simulation management |
| Web UI | 5271 | SvelteKit dashboard |
| SSH nodes | 2222-2322 | SSH access to simulated nodes (100 max) |

## Use cases

### 1. Pre-deployment validation

Test your `kombination.yaml` before deploying to real hardware:

```bash
# Create simulation from KombiStack spec
curl -X POST http://localhost:5270/api/v1/simulations/from-spec \
  -d @kombination.yaml

# Deploy to simulation
kombistack apply --simulate-only kombination.yaml

# If successful, deploy to real hardware
kombistack apply kombination.yaml
```

### 2. Development environment

Create isolated dev environments for testing:

```bash
# Apply development template
curl -X POST http://localhost:5270/api/v1/templates/development/apply \
  -d '{"simulation_name": "dev-env", "auto_start": true}'

# SSH into dev node
ssh -p 2222 root@localhost

# Install and test your app
apt-get update && apt-get install -y nodejs
node app.js
```

### 3. CI/CD testing

Integrate with CI pipelines for automated testing:

```yaml
# .github/workflows/test.yml
jobs:
  test-infrastructure:
    runs-on: ubuntu-latest
    services:
      kombisim:
        image: ghcr.io/kombiverselabs/kombisim:latest
        ports:
          - 5270:5270
    steps:
      - name: Create simulation
        run: |
          curl -X POST http://localhost:5270/api/v1/simulations \
            -d @test-config.json
      
      - name: Run tests
        run: |
          ./run-infrastructure-tests.sh
```

### 4. Training and demos

Safe environment for learning and demonstrations:

```bash
# Create demo environment
curl -X POST http://localhost:5270/api/v1/templates/homelab-basic/apply \
  -d '{"simulation_name": "demo", "auto_start": true}'

# Show students how to configure services
ssh -p 2222 root@localhost
docker run -d nginx
```

## Workflow

<Steps>
  <Step title="Create simulation">
    Define your infrastructure:
    
    ```json
    {
      "name": "my-homelab-test",
      "category": "homelab",
      "nodes": [
        {"name": "web-server", "location": "local"},
        {"name": "database", "location": "local"}
      ]
    }
    ```
  </Step>

  <Step title="Start nodes">
    KombiSim creates Docker containers and assigns SSH ports:
    
    ```bash
    curl -X POST http://localhost:5270/api/v1/simulations/{id}/start
    ```
  </Step>

  <Step title="Test configuration">
    SSH into nodes and validate your setup:
    
    ```bash
    # Get SSH details
    curl http://localhost:5270/api/v1/nodes/{id}/ssh
    
    # SSH into node
    ssh -p 2222 root@localhost
    # Password: kombisim
    
    # Test your configuration
    docker ps
    systemctl status nginx
    ```
  </Step>

  <Step title="Export and deploy">
    Once validated, export to KombiStack:
    
    ```bash
    # Export simulation config
    curl http://localhost:5270/api/v1/simulations/{id}/export > kombination.yaml
    
    # Deploy to real hardware
    kombistack apply kombination.yaml
    ```
  </Step>
</Steps>

## Limitations

<Warning>
  KombiSim is for **testing and validation**, not production workloads.
</Warning>

**What KombiSim simulates:**
- ✅ Service deployment and configuration
- ✅ Network connectivity and firewall rules
- ✅ SSH access and authentication
- ✅ Basic resource constraints
- ✅ Docker container orchestration

**What KombiSim does NOT simulate:**
- ❌ Real hardware performance
- ❌ Actual network latency
- ❌ Physical hardware failures
- ❌ Production-scale load
- ❌ Bare metal provisioning

## License

KombiSim is licensed under the **MIT License** - free for commercial and personal use.

## Next steps

<CardGroup cols={2}>
  <Card
    title="Quick start guide"
    icon="play"
    href="/tools/kombisim/quickstart"
  >
    Create your first simulation
  </Card>
  <Card
    title="Explore templates"
    icon="file-code"
    href="/tools/kombisim/templates"
  >
    Browse pre-built templates
  </Card>
  <Card
    title="Installation guide"
    icon="download"
    href="/tools/kombisim/installation"
  >
    Install KombiSim
  </Card>
  <Card
    title="API reference"
    icon="code"
    href="/api/kombisim/overview"
  >
    Explore the REST API
  </Card>
</CardGroup>
