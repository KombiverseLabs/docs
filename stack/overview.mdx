---
title: kombify Stack
description: The brain of your homelab ‚Äî orchestration made simple
sidebarTitle: Overview
icon: server
---

**kombify Stack** is your homelab's control center. Tell it what you want, and it figures out how to make it happen ‚Äî from a single server to a multi-node cluster.

## The simple version

<Card title="What does Stack do?" icon="lightbulb">
  Imagine you want a private photo cloud for your family. Instead of spending days researching Docker, reverse proxies, and SSL certificates, you write a simple configuration file describing *what* you want. Stack handles *everything else* ‚Äî validation, setup, deployment, and ongoing maintenance.
</Card>

```yaml kombination.yaml
# This is all you write
stackkit: base-homelab
services:
  - traefik    # Handles web traffic
  - immich     # Your photo cloud
```

Stack transforms this into hundreds of lines of configuration and deploys it to your server automatically.

<Accordion title="üîß Technical details" icon="code">
  Stack is a Go-based orchestration engine that:
  - Reads your `kombination.yaml` specification
  - Validates it against CUE schemas from StackKits
  - Generates OpenTofu/Docker configurations
  - Deploys via mTLS-secured gRPC agents on your nodes
  - Continuously monitors for drift between desired and actual state
  
  **Tech stack:** Go 1.24+, PocketBase (SQLite), OpenTofu, CUE, gRPC with mTLS
</Accordion>

## Key features

<CardGroup cols={2}>
  <Card title="Write once, deploy anywhere" icon="file-code">
    Your entire homelab configuration lives in one YAML file ‚Äî version-controlled, shareable, reproducible
  </Card>
  <Card title="Test before you break things" icon="flask">
    Simulate deployments in Docker before touching real hardware
  </Card>
  <Card title="Works with what you have" icon="arrows-rotate">
    Already running servers? Stack discovers them and lets you adopt gradually
  </Card>
  <Card title="Self-healing" icon="shield-check">
    Detects when reality drifts from your configuration and can fix it automatically
  </Card>
</CardGroup>

## How it works

```mermaid
flowchart LR
    subgraph You["üë§ You"]
        YAML["<b>kombination.yaml</b><br/>Your wishlist"]
    end

    subgraph Stack["‚öôÔ∏è kombify Stack"]
        direction TB
        Wizard["Wizard<br/><i>or manual edit</i>"]
        Validate["Validate<br/><i>against rules</i>"]
        Generate["Generate<br/><i>real configs</i>"]
        Deploy["Deploy<br/><i>to servers</i>"]
        
        Wizard --> Validate --> Generate --> Deploy
    end

    subgraph Result["üè† Your Homelab"]
        S1["üì∏ Immich<br/>Photo Cloud"]
        S2["üîê Authelia<br/>Login Portal"]
        S3["üìä Homepage<br/>Dashboard"]
    end

    YAML --> Wizard
    Deploy --> Result

    style You fill:#1e293b,stroke:#38bdf8,color:#f8fafc
    style Stack fill:#1e293b,stroke:#fbbf24,color:#f8fafc
    style Result fill:#1e293b,stroke:#4ade80,color:#f8fafc
```

<Steps>
  <Step title="Describe what you want" icon="wand-magic-sparkles">
    Use the Easy Wizard or write a simple YAML file ‚Äî no need to understand Docker, networking, or certificates
  </Step>
  <Step title="Stack validates your choices" icon="check">
    Your configuration is checked against proven patterns to catch errors before deployment
  </Step>
  <Step title="Infrastructure code is generated" icon="code">
    Stack creates all the complex configuration files you'd otherwise write by hand
  </Step>
  <Step title="Services are deployed" icon="rocket">
    Lightweight agents on your servers apply the changes and report back
  </Step>
</Steps>

<Accordion title="üîß Under the hood: The complete data flow" icon="diagram-project">

```mermaid
flowchart TB
    subgraph Input["Input Layer"]
        UI["Web Dashboard<br/><small>Port 5261</small>"]
        CLI["CLI Tool"]
        YAML["kombination.yaml"]
    end

    subgraph Core["kombify Stack Core"]
        API["REST API<br/><small>Port 5260</small>"]
        
        subgraph Unifier["Unifier Engine"]
            Parse["Parse YAML"]
            Validate["CUE Validation"]
            Resolve["Resolve Dependencies"]
            Generate["Generate IaC"]
        end
        
        PB[("PocketBase<br/><small>SQLite State</small>")]
        gRPC["gRPC Server<br/><small>Port 5263</small>"]
        ToFu["OpenTofu<br/>Runner"]
    end

    subgraph Agents["Node Agents"]
        A1["Agent<br/><small>proxmox-01</small>"]
        A2["Agent<br/><small>docker-01</small>"]
        A3["Agent<br/><small>nas-01</small>"]
    end

    subgraph Infra["Deployed Infrastructure"]
        Docker["Docker Containers"]
        VMs["Virtual Machines"]
        Services["Running Services"]
    end

    UI & CLI --> API
    YAML --> API
    API --> Unifier
    API <--> PB
    Unifier --> ToFu
    ToFu --> gRPC
    gRPC <-->|"mTLS encrypted"| A1 & A2 & A3
    A1 & A2 & A3 --> Docker & VMs
    Docker & VMs --> Services

    style Input fill:#1e293b,stroke:#38bdf8,color:#f8fafc
    style Core fill:#1e293b,stroke:#fbbf24,color:#f8fafc
    style Agents fill:#1e293b,stroke:#a78bfa,color:#f8fafc
    style Infra fill:#1e293b,stroke:#4ade80,color:#f8fafc
```

**Data flow explained:**
1. **Input** ‚Äî Configuration enters via Web UI, CLI, or direct YAML file
2. **Unifier Engine** ‚Äî Parses, validates against CUE schemas, resolves dependencies, generates OpenTofu code
3. **State Management** ‚Äî PocketBase stores stack state, job history, and agent registry
4. **Agent Communication** ‚Äî gRPC with mutual TLS ensures secure, authenticated communication
5. **Deployment** ‚Äî Agents execute changes on their respective nodes

</Accordion>

## Architecture at a glance

```mermaid
graph TB
    subgraph Users["Users"]
        Admin["üë§ Admin"]
        Dev["üë§ Developer"]
    end

    subgraph Stack["kombify Stack"]
        Dashboard["üñ•Ô∏è Dashboard<br/><small>SvelteKit</small>"]
        API["üîå API<br/><small>Go + PocketBase</small>"]
        Agents["ü§ñ Agents<br/><small>Go + gRPC</small>"]
    end

    subgraph Nodes["Your Servers"]
        N1["üñ•Ô∏è Server 1"]
        N2["üñ•Ô∏è Server 2"]
        N3["üñ•Ô∏è Server 3"]
    end

    Users --> Dashboard
    Dashboard --> API
    API <-->|"Secure tunnel"| Agents
    Agents --> Nodes

    style Users fill:#1e293b,stroke:#38bdf8,color:#f8fafc
    style Stack fill:#1e293b,stroke:#fbbf24,color:#f8fafc
    style Nodes fill:#1e293b,stroke:#4ade80,color:#f8fafc
```

### Ports and services

| Service | Port | What it does |
|---------|------|--------------|
| **Dashboard** | 5261 | Web interface for managing your homelab |
| **API** | 5260 | REST API + PocketBase admin panel |
| **gRPC** | 5263 | Secure communication with agents |

<Accordion title="üîß Technical specifications" icon="microchip">

| Component | Technology | Purpose |
|-----------|------------|---------|
| **Backend** | Go 1.24+ | Core services, agents, CLI |
| **Frontend** | SvelteKit 2.x | Modern reactive dashboard |
| **Database** | PocketBase (SQLite) | Embedded state management |
| **IaC Engine** | OpenTofu 1.6+ | Infrastructure provisioning |
| **Validation** | CUE 0.15+ | Type-safe schema validation |
| **Networking** | gRPC + mTLS | Encrypted agent communication |

**Why these choices?**
- **Go** ‚Äî Single binary, low memory, cross-platform
- **PocketBase** ‚Äî Zero-config embedded database with auth
- **OpenTofu** ‚Äî Open-source Terraform fork, battle-tested
- **CUE** ‚Äî Catch configuration errors before deployment
- **mTLS** ‚Äî Every connection is encrypted and authenticated

</Accordion>

## Core principles

### 1. Your intent stays untouched

```mermaid
flowchart LR
    Intent["üìù Your File<br/><i>kombination.yaml</i>"]
    Generated["‚öôÔ∏è Generated<br/><i>docker-compose.yml<br/>traefik.yml<br/>...</i>"]
    Infra["üñ•Ô∏è Running<br/><i>Your servers</i>"]

    Intent -->|"read only"| Generated
    Generated -->|"deployed"| Infra

    style Intent fill:#1e293b,stroke:#38bdf8,color:#f8fafc
    style Generated fill:#1e293b,stroke:#fbbf24,color:#f8fafc
    style Infra fill:#1e293b,stroke:#4ade80,color:#f8fafc
```

Stack never modifies your configuration file. All transformations create separate artifacts that you can inspect.

### 2. One Stack = one homelab

<Note>
  A single kombify Stack instance manages one homelab. That homelab can include multiple physical servers (nodes), but they belong to one logical unit.
</Note>

Need multiple homelabs? Use [kombify Cloud](/Cloud/overview) to manage several Stack instances from one dashboard.

### 3. Brownfield-friendly

Already have servers running? Stack doesn't force you to start from scratch:

```mermaid
flowchart LR
    subgraph Existing["Existing Setup"]
        E1["üñ•Ô∏è NAS Server<br/><i>unmanaged</i>"]
        E2["üñ•Ô∏è Docker Host<br/><i>unmanaged</i>"]
    end

    subgraph Discovery["Stack Discovery"]
        Scan["üîç Scan network"]
        Classify["üìã Classify devices"]
    end

    subgraph Adoption["Gradual Adoption"]
        M1["‚úÖ Docker Host<br/><i>managed</i>"]
        U1["üìã NAS Server<br/><i>monitored only</i>"]
    end

    Existing --> Scan
    Scan --> Classify
    Classify --> Adoption

    style Existing fill:#1e293b,stroke:#ef4444,color:#f8fafc
    style Discovery fill:#1e293b,stroke:#fbbf24,color:#f8fafc
    style Adoption fill:#1e293b,stroke:#4ade80,color:#f8fafc
```

- **Managed** ‚Äî Stack fully controls configuration and deployment
- **Unmanaged** ‚Äî Stack sees the device but doesn't touch it
- You can gradually move devices from unmanaged to managed as you're ready

## Quick Example

```yaml kombination.yaml
version: "1.0"
stackkit: base-homelab

meta:
  name: my-homelab
  domain: home.example.com

nodes:
  - name: proxmox-01
    type: hypervisor
    connection:
      host: 192.168.1.100
      user: root
      ssh_key: ~/.ssh/id_ed25519

services:
  - traefik      # Reverse proxy with auto-SSL
  - authelia     # Single sign-on
  - homepage     # Dashboard
  - immich       # Photo management
```

```bash
# Validate configuration
kombify validate

# Preview changes
kombify plan

# Apply to infrastructure
kombify apply
```

## Installation Options

<CardGroup cols={3}>
  <Card title="Docker" icon="docker" href="/stack/install/docker">
    Fastest way to get started ‚Äî single `docker compose up`
  </Card>
  <Card title="Kubernetes" icon="dharmachakra" href="/stack/install/kubernetes">
    Production-ready Helm chart with HA support
  </Card>
  <Card title="Bare Metal" icon="server" href="/stack/install/bare-metal">
    Install directly on Linux servers
  </Card>
</CardGroup>

## Next Steps

<Columns cols={2}>
  <Card title="Quick Start" icon="rocket" href="/stack/quickstart">
    Deploy your first stack in 10 minutes
  </Card>
  <Card title="Architecture Deep Dive" icon="sitemap" href="/stack/architecture">
    Understand the Unifier, agents, and data flow
  </Card>
</Columns>

---

## Getting Help

<Columns cols={3}>
  <Card title="Troubleshooting" icon="wrench" href="/stack/troubleshooting">
    Common issues and solutions
  </Card>
  <Card title="Discord" icon="discord" href="https://discord.gg/kombify">
    Real-time community support
  </Card>
  <Card title="GitHub" icon="github" href="https://github.com/kombify/stack">
    Report issues and contribute
  </Card>
</Columns>
